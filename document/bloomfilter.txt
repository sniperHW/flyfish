防止请求穿透到db

当一个kv被访问，且kv不在flykv缓存中的时候，flykv向db请求加载kv,如果kv在数据库中不存在，则kv在flykv中的状态为no_record。
只要kv不被替换，那么这个在db中不存在的kv，在下次被访问时，都会被flykv拦截到，无需再次向db查询是否存在。

flyfish作为一个为网络游戏设计的缓存系统，需要结合游戏的数据访问特点设计bloomfilter。

网游的主要数据是与用户关联的，数据的新增跟用户新增成正比，数据的插入主要集中在用户创建阶段，之后的操作都是数据变更，删除操作很少，有需要删除的地方基本都通过标记删除处理。

在开服阶段，大量新用户进入游戏，此时数据库中不存在用户数据，使用bloomfilter拦截请求，一旦bloomfilter返回不存在，即可确定数据库中不存在给定的kv，flyfish无需再向db查询。这样可以有效降低开服阶段数据库的压力。

bloomfilter的安全性需求：如果bloomfilter返回不存在，则数据库中必然不存在。

为了保证安全性，flyfish在向db插入kv前，必选先往bloomfilter添加kv。只有待bloomfilter确认添加成功才能向db插入kv。


bloomfilter的清理与重建：

1）游戏开发阶段，经常需要清库，清库之后需要清理bloomfilter.

2) 游戏有回档的需求，回档后，有的记录就不存在了，因此，需要清理bloomfilter并使用回档后的数据重建bloomfilter.
























































